<!doctype html><html lang=es-es>
<head>
<meta charset=utf-8>
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Gu칤a de estilo de rOpenSpain</title>
<meta name=author content="rOpenSpain">
<meta name=keywords content="Data,rstats,Open">
<meta name=description content="rOpenSci is our form, Spanish public data our matter">
<meta name=generator content="Hugo 0.92.2">
<link href="//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800" rel=stylesheet type=text/css>
<link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css>
<link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous>
<link href=/css/animate.css rel=stylesheet>
<link href=/css/style.violet.css rel=stylesheet id=theme-stylesheet>
<link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link href=/css/owl.carousel.css rel=stylesheet>
<link href=/css/owl.theme.css rel=stylesheet>
<link rel=alternate href=https://ropenspain.es/index.xml type=application/rss+xml title=rOpenSpain>
<meta property="og:locale" content="es_es">
<meta property="og:site_name" content="rOpenSpain">
<meta property="og:title" content="Gu칤a de estilo de rOpenSpain">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ropenspain.es/docs/guia_estilo/">
<meta property="og:description" content="rOpenSci is our form, Spanish public data our matter">
<meta property="og:image" content="https://ropenspain.es/img/ropenspain.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="518">
<meta property="og:image:height" content="600">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@rOpenSpain">
<meta name=twitter:title content="Gu칤a de estilo de rOpenSpain">
<meta name=twitter:image content="https://ropenspain.es/img/ropenspain.png">
<meta name=twitter:description content="rOpenSci is our form, Spanish public data our matter">
<link rel=apple-touch-icon sizes=180x180 href=https://ropenspain.es/img/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://ropenspain.es/img/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://ropenspain.es/img/favicon-16x16.png>
<link rel=manifest href=https://ropenspain.es/img/site.webmanifest>
<link rel=mask-icon href=https://ropenspain.es/img/safari-pinned-tab.svg color=#97bf13>
<link rel="shortcut icon" href=https://ropenspain.es/img/favicon.ico>
<meta name=msapplication-TileColor content="#97bf13">
<meta name=msapplication-config content="https://ropenspain.es/img/browserconfig.xml">
<meta name=theme-color content="#97bf13">
</head>
<body>
<div id=all>
<header>
<header class=navbar-affixed-top data-spy=affix data-offset-top=62>
<div class="navbar navbar-default yamm" role=navigation id=navbar>
<div class=container>
<div class=navbar-header>
<a class="navbar-brand home" href=/>
<img src=/img/logo.png alt="Gu칤a de estilo de rOpenSpain logo" class="hidden-xs hidden-sm">
<img src=/img/logo-small.png alt="Gu칤a de estilo de rOpenSpain logo" class="visible-xs visible-sm">
<span class=sr-only>Gu칤a de estilo de rOpenSpain - ir a inicio</span>
</a>
<div class=navbar-buttons>
<button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Cambiar Navegaci칩n</span>
<i class="fas fa-align-justify"></i>
</button>
</div>
</div>
<div class="navbar-collapse collapse" id=navigation>
<ul class="nav navbar-nav navbar-right">
<li class=dropdown>
<a href=/paquetes/>Paquetes</a>
</li>
<li class="dropdown active">
<a href=/docs/>Documentaci칩n</a>
</li>
<li class=dropdown>
<a href=/blog/>Blog</a>
</li>
<li class=dropdown>
<a href=/faq/>FAQ</a>
</li>
<li class=dropdown>
<a href=/contact/>Contacto</a>
</li>
</ul>
</div>
<div class="collapse clearfix" id=search>
<form class=navbar-form role=search>
<div class=input-group>
<input type=text class=form-control placeholder=Search>
<span class=input-group-btn>
<button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button>
</span>
</div>
</form>
</div>
</div>
</div>
</header>
</header>
<div id=heading-breadcrumbs>
<div class=container>
<div class=row>
<div class=col-md-12>
<h1>Gu칤a de estilo de rOpenSpain</h1>
</div>
</div>
</div>
</div>
<div id=content>
<div class=container>
<div class=row>
<div class=col-md-12>
<div>
<h2 id=mensajes-de-error>Mensajes de error</h2>
<p>Usa <code>message()</code> y <code>warning()</code> para lanzar mensajes al usuario que usa tus funciones. Por favor, no uses <code>print()</code> o <code>cat()</code> a menos que el cometido sea utilizar un m칠todo de impresi칩n por pantalla dado que son m치s dif칤ciles de suprimir por parte de los usuarios en caso de que lo deseen.</p>
<h2 id=paquetes-recomendados>Paquetes recomendados</h2>
<p>Adem치s de los ya recomendados en el resto de apartados (<em>roxygen2, usethis, knitr, testthat</em>), recomendamos los siguientes:</p>
<ul>
<li>Para peticiones http es mejor usar <code>httr</code> en lugar de <code>RCurl</code>.</li>
<li>Para el procesamiento de JSON, usa <code>jsonlite</code> en lugar de <code>rjson</code> o <code>RJSONIO</code>.</li>
<li>Para el procesado, creaci칩n y manipulaci칩n de XML, recomendamos el uso de <code>xml2</code> en t칠rminos generales.</li>
</ul>
<h2 id=nombres-de-paquetes>Nombres de paquetes</h2>
<p>Recomendamos nombres cortos y descriptivos en min칰sculas. Si tu paquete tiene vinculaciones con servicios comerciales por favor aseg칰rate de que no viola las leyes de propiedad intelectual, las marcas y patentes. Puedes comprobar si el nombre del paquete est치 ya utilizado con una b칰squeda en el <a href=https://cran.r-project.org/web/packages/available_packages_by_name.html>listado completo de paquetes de CRAN</a>, en el <a href=http://rpkg.gepuro.net/>listado de paquetes R de GitHub</a> o el buscador de paquetes y funciones de <a href=https://www.rdocumentation.org>https://www.rdocumentation.org</a></p>
<p>춰Tambi칠n puedes usar el paquete <a href=https://github.com/ropenscilabs/available><code>available</code></a> y hacerlo con R!</p>
<h2 id=nombres-de-funciones-y-sintaxis-general>Nombres de funciones y sintaxis general</h2>
<ul>
<li>
<p>Recomendamos el uso de <code>snake_case</code> en t칠rminos generales sobre otros estilos a menos que est칠s aportando otro paquete que ya est칠 en uso.</p>
</li>
<li>
<p>Evita siempre conflictos de nombres entre tus funciones y las de los paquetes de base de R. Tambi칠n evita este conflicto con otros paquetes populares como <code>ggplot2</code>, <code>dplyr</code>, <code>magrittr</code> o <code>data.table</code>. Si quieres que tu funci칩n se use, es mejor que no se llame igual que otra que ya existe.</p>
</li>
<li>
<p>Considera una nomenclatura de <code>objeto_verbo()</code> para funciones en tu paquete que usen tipos de datos similares o utilicen una API com칰n. Por <code>objeto</code> nos referimos a los datos o al API y por <code>verbo</code> nos referimos a la acci칩n principal de dicha funci칩n. Esto ayuda a evitar conflictos de nombres con paquetes que tengan similares verbos o funciones, haciendo el c칩digo m치s legible y f치cil de autocompletar. Por poner un ejemplo, en <strong>stringi</strong>, todas las funciones que empiezan por <code>stri_</code> manipulan cadenas de texto (<code>stri_join()</code>, <code>stri_sort()</code>, o en otyro caso, el paquete <strong>googlesheets</strong> ofrece funciones que comienzan por <code>gs_</code> y que son llamadas a la API de Google Sheets (<code>gs_auth()</code>, <code>gs_user()</code>, <code>gs_download()</code>).</p>
</li>
<li>
<p>Las funciones que manipulan un objeto o dato concreto y retornan un objeto o dato del mismo tipo recomendamos que lleven como primer argumento dicho dato u objeto. De este modo ganar치s compatibilidad con el operador tuber칤a (pipe) de magrittr (<code>%>%</code>)</p>
</li>
<li>
<p>Para m치s informaci칩n sobre c칩mo adaptar estilos de c칩digo, funciones y scripts en R, recomendamos la lectura del cap칤tulo dedicado a este tema en el conocido <a href=http://r-pkgs.had.co.nz/r.html>libro de Hadley Wickam</a>.</p>
</li>
</ul>
<h2 id=documentaci칩n>Documentaci칩n</h2>
<ul>
<li>
<p>Todas las funciones exportadas de un paquete deben ser extensamente documentadas incluyendo ejemplos claros.</p>
</li>
<li>
<p>El paquete debe de incluir documentaci칩n global que se pueda ver con la llamada a la funci칩n <code>?foobar</code>, (o <code>?foobar-paquete</code> si hay un caso de conflicto de nombres). Opcionalmente podr치s usar ambos comandos para el fichero del manual, utilizando <code>?foobar</code> y <code>?foobar-paquete</code> mediante etiquetas roxygen de tipo <code>@aliases</code>.</p>
</li>
<li>
<p>El paquete debe de contener como m칤nimo una vi침eta que provea una introducci칩n a las funciones principales y casos de uso sencillos.</p>
</li>
<li>
<p>Igual que en el caso del archivo README, la documentaci칩n de nivel superior o las vi침etas deben ser el principal punto de entrada para los usuarios. Si tu paquete conecta a una fuente de datos externa o a un servicio online, o si envuelve otro software externo, debe de proveer suficiente informaci칩n al usuario para comprender la naturaleza de el dato, el servicio, el software utilizado, etc칠tera. As칤 mismo debe proveer de enlaces a cualquier informaci칩n relevante.
Por ejemplo, una vi침eta no deber칤a solamente decir cosas como: &ldquo;ofrece acceso al servicio web del &mldr;&rdquo; sino que tambi칠n debe de incluir un repositorio de los diferentes servicios que el citado servicio online provee, informaci칩n general sobre su funcionamiento, la documentaci칩n de la estructura de los datos y sus metadatos, todo ello accesible mediante enlaces visibles.</p>
</li>
<li>
<p>Recomendamos encarecidamente que todos los paquetes tengan <code>roxygen2</code> como m칠todo de documentaci칩n fundamental. <code>roxygen2</code> es <a href=http://cran.r-project.org/web/packages/roxygen2/index.html>un paquete R</a> cuya funci칩n principal es compilar los ficheros <code>.Rd</code> en el directorio <code>man</code> del paquete, con sencillas etiquetas a침adidas sobre cada funci칩n.</p>
</li>
<li>
<p>Puedes encontrar ms informaci칩n sobre roxygen2 <a href=http://r-pkgs.had.co.nz/man.html>aqu칤</a> en el mencionado libro de Hadley Wickham sobre paquetes R.</p>
</li>
<li>
<p>Una de las principales ventajas del uso de <code>roxygen2</code> es que el <code>NAMESPACE</code> siempre se genera autom치ticamente y est치 siempre actualizado.</p>
</li>
<li>
<p>Cuando utilizes <code>roxygen2</code>, a침ade <code>#' @noRd</code> a las funciones internas.</p>
</li>
</ul>
<h2 id=autor칤a>Autor칤a</h2>
<p>El archivo <code>DESCRIPTION</code> de un paquete debe listar a sus autores y contribuyentes principales utilizando la sintaxis <code>Authors@R</code> para indicar sus roles (author/creator/contributor etc.) si ocurriese que hay mas de un autor. Puedes leer <a href=https://cran.rstudio.com/doc/manuals/r-release/R-exts.html#The-DESCRIPTION-file>esta secci칩n del manual de R: &ldquo;Writing R Extensions&rdquo;</a> para m치s detalles. Si crees que los revisores han hecho contribuciones sustanciales al desarrollo de tu paquete, puedes listarlos en el campo <code>Authors@R</code> asign치ndoles el tipo &ldquo;revisor&rdquo; (<code>"rev"</code>), por ejemplo as칤:</p>
<pre tabindex=0><code>    person(&quot;Mar칤a&quot;, &quot;P칠rez&quot;, role = &quot;rev&quot;,
    comment = &quot;Mar칤a revis칩 el paquete para rOpenSpain, ver &lt;https://github.com/rOpenSpain/onboarding/issues/116&gt;&quot;),
</code></pre><p>Solamente debes incluir los revisores si previamente te han dado su consentimiento. Debes tener en cuenta que &lsquo;rev&rsquo; lanzar치 una CRAN NOTE a menos que el paquete se compile utilizando R v3.5 (r-devel desde 2017-09-21).</p>
<p>Por favor no liste editores como contribuyentes. Tu participaci칩n y tu contribuci칩n a rOpenSpain nos parece un gran aporte que consideramos como un agradecimiento suficiente hacia este proyecto. 游뗵</p>
<h2 id=_testing_><em>Testing</em></h2>
<ul>
<li>
<p>Todos los paquetes deben de pasar el test <code>R CMD check</code>/<code>devtools::check()</code> de todas las plataformas principales.</p>
</li>
<li>
<p>Todos los paquetes deben tener un conjunto de tests que cubra las funcionalidades principales del mismo.</p>
</li>
<li>
<p>Recomendamos parta este fin usar <code>testthat</code>. Persevera en escribir tests al mismo tiempo que escribes las funciones. Esto sirve en primer lugar para tener tests disponibles para las mismas, pero tambi칠n te ayudar치 a pensar en todas las formas en que tu funci칩n puede fallar y programar치s de forma m치s <em>defensiva</em>. <a href=http://r-pkgs.had.co.nz/tests.html>M치s informaci칩n</a>.</p>
</li>
<li>
<p><code>testthat</code> tiene una funci칩n denominada <code>skip_on_cran()</code> que puedes utilizar para que no corran los tests en CRAN. Recomendamos usarlo en todas las funciones que incluyen llamadas a APIs externas que tienen bastantes probabilidades de fallar en CRAN. Estos tests seguir치n corriendo en Travis sin embargo.</p>
</li>
<li>
<p>Comprueba la extensi칩n de la cobertura de tus tests con el paquete <a href=https://github.com/jimhester/covr><strong>covr</strong></a>. Incluyendo una insignia o distintivo (badge) con la cobertura de los tests en tu README haces m치s f치cil que los revisores vean en qu칠 extensi칩n est치n testadas las funciones de tu paquete. No se requiere cobertura al 100%, pero los editores y los revisores utilizar치n los informes de cobertura como punto de partida para evaluar si tus test cubren las funcionalidades principales.</p>
</li>
<li>
<p>A칰n usando <a href=#ci>integraci칩n continua</a>, recomendamos que se corran los tests de manera local antes de enviarnos el paquete, ya que sabemos que muchos tests a veces son soslayados. (Podr칤as necesitar el ajuste de <code>Sys.setenv(NOT_CRAN="true")</code> para asegurarte de que se ejecuten todos.) Adem치s recomendamos que antes de enviarnos tu paquete uses las buenas pr치cticas que propone <a href=https://github.com/MangoTheCat/goodpractice/><strong>Gabor Csardi</strong></a> en su paquete y ejecutar <code>devtools::spell_check()</code> para encontrar errores de escritura en la documentaci칩n.</p>
</li>
</ul>
<h2 id=versionado>Versionado</h2>
<p>Recomendamos que tu paquete use versionado sem치ntico. Una explicaci칩n detallada sobre el mismo est치 disponible en <a href=http://r-pkgs.had.co.nz/description.html#version>este cap칤tulo</a>. Etiqueta cada versi칩n despu칠s de enviar a CRAN. <a href=http://marker.to/ZYd3kZ>m치s informaci칩n</a></p>
<p>Tambi칠n puedes leer la <a href=https://semver.org/>documentaci칩n oficial sobre versionado sem치ntico</a></p>
<h2 id=dependencias>Dependencias</h2>
<ul>
<li>
<p>Usa <code>Imports</code> en lugar de <code>Depends</code> para paquetes que provean funciones de otros paquetes. Aseg칰rate de listar los paquetes utilizados en los tests (<code>testthat</code>), y la documentaci칩n (<code>knitr</code>, <code>roxygen2</code>) en la secci칩n <code>Suggests</code> de las dependencias. Si usas cualquier otro paquete en los ejemplos, aseg칰rate tambi칠n de listarlos si no est치n mencionados en otro lugar, en la secci칩n <code>Enhances</code>.</p>
</li>
<li>
<p>Para la mayor칤a de los casos donde expones funciones de dependencias al usuario deberas importar y re-exportar las funciones concretas en lugar de simplemente mencionarlas en el campo <code>Depends</code>. Por ejemplo, si las funciones en tu paquete producen objetos de un tipo concreto que usas para hacer gr치ficos, deberas re-exportar solamente las funciones que imprimen o dibujan los gr치ficos en lugar del paquete entero.</p>
</li>
</ul>
<h2 id=cosas-a-tener-en-cuenta>Cosas a tener en cuenta</h2>
<p>Hay una serie de problemas comunes encontrados a la hora de publicar un paquete en CRAN. Tenlas en cuenta:</p>
<ul>
<li>Aseg칰rate de que el titulo est치 en <em>Title Case</em>.</li>
<li>No pongas un punto al final del t칤tulo.</li>
<li>Evita comenzar el apartado de la descripci칩n con el nombre del paquete o la expresi칩n <em>Este paquete&mldr;.</em>. S칠 m치s informativo.</li>
<li>Aseg칰rate de incluir enlaces a paginas web si haces <em>scraping</em>, usas APIs de terceros, etc칠tera en el campo <code>Description</code> del archivo <code>DESCRIPTION</code> del paquete.</li>
<li>Evita los tests y los ejemplos que tardan demasiado en ejecutarse o realizan llamadas a APIs externas que son lentas porque CRAN rechazar치 tu paquete. Usa <code>testthat::skip_on_cran</code> en los tests para evitar la ejecuci칩n de los que tardan demasiado pero deseas que se comprueben localmente o en entornos de CI como Travis (ver nuestra <a href=#ci>Gu칤a de integraci칩n continua</a>).</li>
<li>Inluye los archivos globales como <code>paper.md</code> o <code>.travis.yml</code> en el <code>.Rbuildignore</code>.</li>
</ul>
<h2 id=enlaces-recomendados>Enlaces recomendados</h2>
<ul>
<li>
<p>Hadley Wickham&rsquo;s <em>R Packages</em> es un buen libro sobre el desarrollo de paquetes y est치 disponible <a href=http://r-pkgs.had.co.nz/>de manera gratuita en la web</a>.</p>
</li>
<li>
<p><a href=https://cran.r-project.org/doc/manuals/r-release/R-exts.html>Writing R Extensions</a> es el libro can칩nico y m치s actualizado sobre el proceso de creaci칩n de paquetes para R.</p>
</li>
<li>
<p>Si a침ades un paquete a rOpenSpain puedes enviar tus cuestiones al equipo rector de rOpenSpain en el issue tracker, o a trav칠s de nuestro formulario de contacto.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<footer id=footer>
<div class=container>
<div class="col-md-4 col-sm-6">
<h4>Sobre nosotros</h4>
<p>rOpenSpain es una comunidad de entusiastas de <strong>R</strong>, de los datos abiertos y la reproducibilidad que se re칰ne y organiza para crear paquetes de <strong>R</strong> de la m치xima calidad para la explotaci칩n de datos espa침oles de inter칠s general.</p>
<hr class="hidden-md hidden-lg hidden-sm">
</div>
<div class="col-md-4 col-sm-6">
</div>
<div class="col-md-4 col-sm-6">
<h4>Contacto</h4>
<p><strong>rOpenSpain</strong>
<br>Espa침a
</p>
<a href=/contact class="btn btn-small btn-template-main">Ir a la p치gina de contacto</a>
<hr class="hidden-md hidden-lg hidden-sm">
</div>
</div>
</footer>
<div id=copyright>
<div class=container>
<div class=col-md-12>
<p class=pull-left><p xmlns:cc=http://creativecommons.org/ns# xmlns:dct=http://purl.org/dc/terms/>춸 2018 <a rel="cc:attributionurl dct:creator" property="cc:attributionName" href=https://ropenspain.es/>rOpenSpain</a> bajo licencia <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-NC-SA 4.0<img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p></p>
<p class=pull-right>
Plantilla creada por <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Adaptada a Hugo por <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.
</p>
</div>
</div>
</div>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-113970384-1','auto'),ga('send','pageview'))</script>
<script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script>
<script src=/js/front.js></script>
<script src=/js/owl.carousel.min.js></script>
</body>
</html>