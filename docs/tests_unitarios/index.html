<!doctype html><html lang=es-es>
<head>
<meta charset=utf-8>
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Test unitarios para paquetes de rOpenSpain</title>
<meta name=author content="rOpenSpain">
<meta name=keywords content="Data,rstats,Open">
<meta name=description content="rOpenSci is our form, Spanish public data our matter">
<meta name=generator content="Hugo 0.87.0">
<link href="//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800" rel=stylesheet type=text/css>
<link rel=stylesheet href=//use.fontawesome.com/releases/v5.11.2/css/all.css>
<link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous>
<link href=/css/animate.css rel=stylesheet>
<link href=/css/style.violet.css rel=stylesheet id=theme-stylesheet>
<link href=/css/custom.css rel=stylesheet><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link href=/css/owl.carousel.css rel=stylesheet>
<link href=/css/owl.theme.css rel=stylesheet>
<link rel=alternate href=https://ropenspain.es/index.xml type=application/rss+xml title=rOpenSpain>
<meta property="og:locale" content="es_es">
<meta property="og:site_name" content="rOpenSpain">
<meta property="og:title" content="Test unitarios para paquetes de rOpenSpain">
<meta property="og:type" content="website">
<meta property="og:url" content="https://ropenspain.es/docs/tests_unitarios/">
<meta property="og:description" content="rOpenSci is our form, Spanish public data our matter">
<meta property="og:image" content="https://ropenspain.es/img/ropenspain.png">
<meta property="og:image:type" content="image/png">
<meta property="og:image:width" content="518">
<meta property="og:image:height" content="600">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@rOpenSpain">
<meta name=twitter:title content="Test unitarios para paquetes de rOpenSpain">
<meta name=twitter:image content="https://ropenspain.es/img/ropenspain.png">
<meta name=twitter:description content="rOpenSci is our form, Spanish public data our matter">
<link rel=apple-touch-icon sizes=180x180 href=https://ropenspain.es/img/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=https://ropenspain.es/img/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=https://ropenspain.es/img/favicon-16x16.png>
<link rel=manifest href=https://ropenspain.es/img/site.webmanifest>
<link rel=mask-icon href=https://ropenspain.es/img/safari-pinned-tab.svg color=#97bf13>
<link rel="shortcut icon" href=https://ropenspain.es/img/favicon.ico>
<meta name=msapplication-TileColor content="#97bf13">
<meta name=msapplication-config content="https://ropenspain.es/img/browserconfig.xml">
<meta name=theme-color content="#97bf13">
</head>
<body>
<div id=all>
<header>
<header class=navbar-affixed-top data-spy=affix data-offset-top=62>
<div class="navbar navbar-default yamm" role=navigation id=navbar>
<div class=container>
<div class=navbar-header>
<a class="navbar-brand home" href=/>
<img src=/img/logo.png alt="Test unitarios para paquetes de rOpenSpain logo" class="hidden-xs hidden-sm">
<img src=/img/logo-small.png alt="Test unitarios para paquetes de rOpenSpain logo" class="visible-xs visible-sm">
<span class=sr-only>Test unitarios para paquetes de rOpenSpain - ir a inicio</span>
</a>
<div class=navbar-buttons>
<button type=button class="navbar-toggle btn-template-main" data-toggle=collapse data-target=#navigation>
<span class=sr-only>Cambiar Navegación</span>
<i class="fas fa-align-justify"></i>
</button>
</div>
</div>
<div class="navbar-collapse collapse" id=navigation>
<ul class="nav navbar-nav navbar-right">
<li class=dropdown>
<a href=/paquetes/>Paquetes</a>
</li>
<li class=dropdown>
<a href=/docs/>Documentación</a>
</li>
<li class=dropdown>
<a href=/blog/>Blog</a>
</li>
<li class=dropdown>
<a href=/faq/>FAQ</a>
</li>
<li class=dropdown>
<a href=/contact/>Contacto</a>
</li>
</ul>
</div>
<div class="collapse clearfix" id=search>
<form class=navbar-form role=search>
<div class=input-group>
<input type=text class=form-control placeholder=Search>
<span class=input-group-btn>
<button type=submit class="btn btn-template-main"><i class="fas fa-search"></i></button>
</span>
</div>
</form>
</div>
</div>
</div>
</header>
</header>
<div id=heading-breadcrumbs>
<div class=container>
<div class=row>
<div class=col-md-12>
<h1>Test unitarios para paquetes de rOpenSpain</h1>
</div>
</div>
</div>
</div>
<div id=content>
<div class=container>
<div class=row>
<div class=col-md-12>
<div>
<p>Desde rOpenSpain estamos comprometidos con la calidad del software que se produce. Es un síntoma de calidad el aplicar, no sólo buenas prácticas de programación, sino también aplicar un estilo de programación <em>&ldquo;defensivo&rdquo;</em> en el sentido de que tenemos que saber de antemano que nuestro código va a fallar, y a veces de formas inesperadas.</p>
<p>Recomendamos por tanto que tu código pase los correspondientes procesos de comprobación/validación con paquetes como <em>testhat</em> que permiten construir tests de prueba de manera paralela al código. Es una buena práctica construir los tests antes de empezar a programar, así podrás ver en todo momento si tu código da los resultados deseados. Como acompañante de <a href=https://cran.r-project.org/web/packages/testthat/index.html>testthat</a> recomendamos el uso del paquete <a href=https://cran.r-project.org/web/packages/usethis/index.html>usethis</a></p>
<p>Os dejamos una breve guía muy simple de como usar estos paquetes:</p>
<ul>
<li>
<p>Descargar e instalar <em>testhat</em> y <em>usethis</em> (seguramente también necesitarás instalar algunas dependencias)</p>
<pre><code>install.packages(&quot;testhat&quot;)
install.packages(&quot;usethis&quot;)

</code></pre></li>
<li>
<p>Imaginemos que estás escribiendo una función que suma dos números (por mor de la sencillez en el ejemplo) y la guardamos en un archivo llamado <em>sum.R</em></p>
</li>
</ul>
<pre><code>sum &lt;- function(n, m){
    result &lt;- n+m
    return(result)
}
</code></pre><ul>
<li>Vemos que nuestro código funciona y seguimos programando, pero antes de continuar es muy buena idea construir un test unitario para nuestra función, porque estamos seguros de que alguno de los cambios o adiciones posteriores pueden provocar que nuestra función se comporte de manera inesperada. Para ello escribimos un archivo R de testeo denominado <em>test_sum.R</em> con el siguiente contenido (de nuevo, disculpad lo absurdo del ejemplo)</li>
</ul>
<pre><code>test_that(&quot;Test sum(4,16)&quot;,{
  expect_equal(sum(4,16), 20)
})
</code></pre><ul>
<li>
<p>Este tipo de comprobaciones sencillas se pueden efectuar para muy diversos resultados esperados gracias al paquete <em>testthat</em>, que posee <strong>expectations</strong> para muchos tipos de comprobaciones, a saber:</p>
<ul>
<li>expect_equal</li>
<li>expect_identical</li>
<li>expect_match</li>
<li>expect_output</li>
<li>expect_message</li>
<li>expect_warning</li>
<li>expect_error</li>
<li>expect_is</li>
</ul>
</li>
<li>
<p>Una vez tengamos nuestros tests construidos, es muy sencillo ejecutarlos en nuestro código. La forma más simple es utilizando <a href=https://github.com/r-lib/usethis>usethis</a>. Asumiendo que estamos en el directorio donde tienes el código de tu paquete, simplemente ejecuta <code>usethis::use_test("test_sum")</code></p>
</li>
<li>
<p>Otra forma de estructurar los tests es creando un archivo de testeo.</p>
<p>El archivo, que vamos a denominar <em>my_testing_suite.R</em> debe tener la siguiente estructura básica:</p>
<pre><code>library(testthat) 

source(&quot;path/to/sum.R&quot;)

test_results &lt;- test_dir(&quot;path/to/tests&quot;, reporter=&quot;summary&quot;)
</code></pre><p>La ejecución de este archivo, dispara la comprobación de todos los tests que hayamos escrito y que estén contenidos en él, entregando un reporte completo de los resultados, tanto si dan resultados positivos como negativos.</p>
<p>Si estás usando RStudio, puedes presionar <code>Cmd/Ctrl + Shift + T</code> para ejecutar todos los tests que tengas en tu paquete.</p>
</li>
<li>
<p>Para profundizar en este tema, recomendamos el capitulo dedicado a testeo unitario en el libro de Hadley Wickam en <a href=http://r-pkgs.had.co.nz/tests.html>http://r-pkgs.had.co.nz/tests.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<footer id=footer>
<div class=container>
<div class="col-md-4 col-sm-6">
<h4>Sobre nosotros</h4>
<p>rOpenSpain es una comunidad de entusiastas de R, de los datos abiertos y la reproducibilidad que se reúne y organiza para crear paquetes de R de la máxima calidad para la explotación de datos españoles de interés general.</p>
<hr class="hidden-md hidden-lg hidden-sm">
</div>
<div class="col-md-4 col-sm-6">
</div>
<div class="col-md-4 col-sm-6">
<h4>Contacto</h4>
<p><strong>rOpenSpain</strong>
<br>España
</p>
<a href=/contact class="btn btn-small btn-template-main">Ir a la página de contacto</a>
<hr class="hidden-md hidden-lg hidden-sm">
</div>
</div>
</footer>
<div id=copyright>
<div class=container>
<div class=col-md-12>
<p class=pull-left>Copyright (c) 2018, rOpenSpain; licencia <a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png></a></p>
<p class=pull-right>
Plantilla creada por <a href=https://bootstrapious.com/p/universal-business-e-commerce-template>Bootstrapious</a>.
Adaptada a Hugo por <a href=https://github.com/devcows/hugo-universal-theme>DevCows</a>.
</p>
</div>
</div>
</div>
</div>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-113970384-1','auto'),ga('send','pageview'))</script>
<script src=//code.jquery.com/jquery-3.1.1.min.js integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin=anonymous></script>
<script src=//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js></script>
<script src=//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js></script>
<script src=/js/front.js></script>
<script src=/js/owl.carousel.min.js></script>
</body>
</html>